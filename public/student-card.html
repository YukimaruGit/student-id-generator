<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>学生証ジェネレーター</title>
  <meta property="og:title" content="放課後クロニクル 学生証ジェネレーター">
  <meta property="og:description" content="あなただけの学生証を作成しよう！">
  <meta property="og:image" content="https://res.cloudinary.com/di5xqlddy/image/upload/f_auto,q_auto,w_1200,h_630,c_fill,fl_force_strip/v1/student-id-generator/preview.png">
  <meta property="og:url" content="https://student-id-generator.pages.dev/">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://res.cloudinary.com/di5xqlddy/image/upload/f_auto,q_auto,w_1200,h_630,c_fill,fl_force_strip/v1/student-id-generator/preview.png">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Noto+Serif+JP:wght@400;700&display=swap" rel="stylesheet">
  
  <style>
    /* 学生証ジェネレーター用のスタイル */
    :root {
      --primary-color: #dda0dd;    /* 撫子色風の柔らかい紫がかったピンク */
      --secondary-color: #b0c4de;  /* 水浅葱風の柔らかい青みのグレー */
      --accent-color: #98d7a5;     /* 若葉色風の柔らかい黄緑 */
      --background-color: #1a1a1a; /* 黒方眼紙風背景 */
      --card-background: #ffffff;
      --text-color: #787878;       /* 優しいミディアムグレー */
      --error-color: #f8d7da;      /* 薄紅色風の非常に優しいピンク */
      --success-color: #d4edda;    /* 白群色風の柔らかいミントグリーン */
      --border-radius: 12px;
      --transition-duration: 0.3s;
      --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      --container-width: 1400px;
    }
    
    * {
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Noto Sans JP', sans-serif;
      margin: 0;
      padding: 0;
      background: var(--background-color);
      background-image: 
        linear-gradient(rgba(255, 255, 255, 0.05) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255, 255, 255, 0.05) 1px, transparent 1px);
      background-size: 20px 20px;
      min-height: 100vh;
      color: var(--text-color);
      line-height: 1.6;
    }
    
    .header-line {
      height: 2px;
      background: white;
      margin-bottom: 2rem;
    }
    
    .container {
      max-width: var(--container-width);
      margin: 0 auto;
      padding: 2rem;
    }
    
    .back-link {
      display: inline-block;
      margin-bottom: 2rem;
      color: var(--primary-color);
      text-decoration: none;
      font-weight: 600;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      transition: all 0.3s ease;
      background: rgba(221, 160, 221, 0.1);
    }
    
    .back-link:hover {
      background: rgba(221, 160, 221, 0.2);
      transform: translateX(-5px);
    }
    
    .main-content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      margin-bottom: 2rem;
    }
    
    .panel {
      background: rgba(248, 246, 240, 0.7);
      border-radius: var(--border-radius);
      padding: 2rem;
      box-shadow: var(--box-shadow);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .panel-title {
      color: #666;
      font-size: 1.3rem;
      font-weight: 650;
      margin-bottom: 1.5rem;
      text-align: center;
      font-family: 'Noto Serif JP', serif;
      text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8), 0 0 4px rgba(255, 255, 255, 0.3);
    }
    
    .image-selection {
      width: 100%;
      height: 200px;
      border: 3px dashed var(--primary-color);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 2rem;
      background: rgba(221, 160, 221, 0.05);
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .image-selection:hover {
      border-color: #c8a2c8;
      background: rgba(221, 160, 221, 0.1);
    }
    
    .image-selection-text {
      color: var(--primary-color);
      font-size: 1.1rem;
      font-weight: 600;
    }
    
    .form-group {
      margin-bottom: 1.5rem;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: #666;
    }
    
    .form-group input,
    .form-group select {
      width: 100%;
      padding: 0.875rem;
      border: 1px solid #bdc3c7;
      border-radius: 8px;
      font-size: 1rem;
      transition: all 0.3s ease;
      background: white;
    }
    
    .form-group input:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(221, 160, 221, 0.1);
    }
    
    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }
    
    .action-buttons {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin-top: 2rem;
    }
    
    .btn {
      padding: 0.875rem 1.5rem;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      color: white;
    }
    
    .btn-return {
      background: var(--accent-color);
    }
    
    .btn-return:hover {
      background: #8bc8a0;
      transform: translateY(-2px);
    }
    
    .btn-view-results {
      background: var(--secondary-color);
    }
    
    .btn-view-results:hover {
      background: #9fb8d1;
      transform: translateY(-2px);
    }
    
    .preview-area {
      width: 100%;
      height: 300px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
      margin-bottom: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid #ecf0f1;
    }
    
    .preview-placeholder {
      color: #95a5a6;
      font-size: 1rem;
      text-align: center;
      line-height: 1.6;
    }
    
    .instructions {
      color: #7f8c8d;
      font-size: 0.85rem;
      line-height: 1.6;
      margin-bottom: 2rem;
    }
    
    .sharing-buttons {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }
    
    .btn-share-x {
      background: #1da1f2;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }
    
    .btn-share-x:hover {
      background: #1a91da;
      transform: translateY(-2px);
    }
    
    .btn-copy-url {
      background: #95a5a6;
    }
    
    .btn-copy-url:hover {
      background: #7f8c8d;
      transform: translateY(-2px);
    }
    
    .diagnosis-result {
      background: rgba(176, 196, 222, 0.3);
      padding: 1.5rem;
      border-radius: 12px;
      margin-bottom: 2rem;
      border-left: 4px solid var(--secondary-color);
    }
    
    .diagnosis-result h3 {
      color: #5a6c7d;
      margin-bottom: 1rem;
      font-size: 1.2rem;
      font-weight: 600;
    }
    
    .diagnosis-item {
      margin-bottom: 0.5rem;
      padding: 0.5rem 0;
    }
    
    .diagnosis-label {
      font-weight: 600;
      color: #5a6c7d;
    }
    
    .diagnosis-value {
      color: #424242;
      margin-left: 0.5rem;
    }
    
    .student-info {
      background: rgba(248, 246, 240, 0.9);
      padding: 1.5rem;
      border-radius: 12px;
      margin-bottom: 1.5rem;
      border-left: 4px solid var(--primary-color);
    }
    
    .student-info h3 {
      color: #666;
      margin-bottom: 1rem;
      font-size: 1.2rem;
      font-weight: 600;
    }
    
    .info-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
      padding: 0.5rem 0;
      border-bottom: 1px solid #dee2e6;
    }
    
    .info-item:last-child {
      border-bottom: none;
    }
    
    .info-label {
      font-weight: 600;
      color: #495057;
    }
    
    .info-value {
      color: #6c757d;
    }
    
    /* レスポンシブ対応 */
    @media (max-width: 1024px) {
      .main-content {
        grid-template-columns: 1fr;
        gap: 1.5rem;
      }
      
      .container {
        padding: 1rem;
      }
    }
    
    @media (max-width: 768px) {
      .panel {
        padding: 1.5rem;
      }
      
      .form-row {
        grid-template-columns: 1fr;
        gap: 0.5rem;
      }
      
      .action-buttons,
      .sharing-buttons {
        grid-template-columns: 1fr;
        gap: 0.75rem;
      }
      
      .image-selection {
        height: 150px;
      }
      
      .preview-area {
        height: 250px;
      }
    }
    
    @media (max-width: 480px) {
      .container {
        padding: 0.5rem;
      }
      
      .panel {
        padding: 1rem;
        border-radius: 12px;
      }
      
      .form-group input,
      .form-group select {
        padding: 0.75rem;
        font-size: 0.95rem;
      }
      
      .btn {
        padding: 0.75rem 1.25rem;
        font-size: 0.95rem;
      }
    }
    
    /* アニメーション */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .panel {
      animation: fadeInUp 0.6s ease-out;
    }
    
    .form-group input:focus,
    .form-group select:focus {
      animation: fadeInUp 0.3s ease-out;
    }
  </style>
</head>
<body>
  <div class="header-line"></div>
  
  <div class="container">
    <a href="/" class="back-link">← 診断ゲームに戻る</a>
    
    <div class="main-content">
      <!-- 左パネル: 学生証作成フォーム -->
      <div class="panel">
        <h2 class="panel-title">学生証を作成</h2>
        
        <div class="image-selection" onclick="selectImage()">
          <div class="image-selection-text">画像を選択</div>
        </div>
        
        <form id="studentForm">
          <div class="form-group">
            <label for="name">氏名（漢字）</label>
            <input type="text" id="name" placeholder="例: 高森のばら" required>
          </div>
          
          <div class="form-group">
            <label for="nameEn">氏名（ローマ字）</label>
            <input type="text" id="nameEn" placeholder="例: Takamori Nobara" required>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="dobMonth">生年月日</label>
              <select id="dobMonth" required>
                <option value="">月</option>
                <option value="1">1月</option>
                <option value="2">2月</option>
                <option value="3">3月</option>
                <option value="4">4月</option>
                <option value="5">5月</option>
                <option value="6">6月</option>
                <option value="7">7月</option>
                <option value="8">8月</option>
                <option value="9">9月</option>
                <option value="10">10月</option>
                <option value="11">11月</option>
                <option value="12">12月</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="dobDay">&nbsp;</label>
              <select id="dobDay" required>
                <option value="">日</option>
                <option value="1">1日</option>
                <option value="2">2日</option>
                <option value="3">3日</option>
                <option value="4">4日</option>
                <option value="5">5日</option>
                <option value="6">6日</option>
                <option value="7">7日</option>
                <option value="8">8日</option>
                <option value="9">9日</option>
                <option value="10">10日</option>
                <option value="11">11日</option>
                <option value="12">12日</option>
                <option value="13">13日</option>
                <option value="14">14日</option>
                <option value="15">15日</option>
                <option value="16">16日</option>
                <option value="17">17日</option>
                <option value="18">18日</option>
                <option value="19">19日</option>
                <option value="20">20日</option>
                <option value="21">21日</option>
                <option value="22">22日</option>
                <option value="23">23日</option>
                <option value="24">24日</option>
                <option value="25">25日</option>
                <option value="26">26日</option>
                <option value="27">27日</option>
                <option value="28">28日</option>
                <option value="29">29日</option>
                <option value="30">30日</option>
                <option value="31">31日</option>
              </select>
            </div>
          </div>
          
          <div class="action-buttons">
            <button type="button" class="btn btn-return" onclick="returnToDiagnosis()">診断に戻る</button>
            <button type="button" class="btn btn-view-results" onclick="viewDiagnosisResults()">診断結果を見る</button>
          </div>
        </form>
      </div>
      
      <!-- 右パネル: プレビューと共有オプション -->
      <div class="panel">
        <h2 class="panel-title">プレビュー</h2>
        
        <div class="preview-area" id="previewArea">
          <div class="preview-placeholder">
            学生証のプレビューが<br>ここに表示されます
          </div>
        </div>
        
        <div class="instructions">
          ※PCはプレビュー画像の上で右クリック→「名前を付けて画像を保存」<br>
          ※共有URLは必ず「URLをコピー」ボタンから取得してください
        </div>
        
        <div class="sharing-buttons">
          <button class="btn btn-share-x" onclick="shareToX()">
            <span>X</span> Xに投稿
          </button>
          <button class="btn btn-copy-url" onclick="copyUrl()">URLをコピー</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // 診断結果のパラメータを取得
    const urlParams = new URLSearchParams(window.location.search);
    const department = urlParams.get('department');
    const course = urlParams.get('course');
    const club = urlParams.get('club');
    
    // 診断結果が設定されている場合、表示
    if (department || course || club) {
      const form = document.getElementById('studentForm');
      const infoDiv = document.createElement('div');
      infoDiv.className = 'diagnosis-result';
      infoDiv.innerHTML = `
        <h3>診断結果</h3>
        ${department ? `<div class="diagnosis-item"><span class="diagnosis-label">学科:</span><span class="diagnosis-value">${department}</span></div>` : ''}
        ${course ? `<div class="diagnosis-item"><span class="diagnosis-label">コース:</span><span class="diagnosis-value">${course}</span></div>` : ''}
        ${club ? `<div class="diagnosis-item"><span class="diagnosis-label">部活動:</span><span class="diagnosis-value">${club}</span></div>` : ''}
      `;
      form.insertBefore(infoDiv, form.firstChild);
    }
    
    // 画像選択機能
    function selectImage() {
      const input = document.createElement('input');
      input.type = 'file';
      input.accept = 'image/*';
      input.onchange = function(e) {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = function(e) {
            const imageSelection = document.querySelector('.image-selection');
            imageSelection.innerHTML = `<img src="${e.target.result}" style="max-width: 100%; max-height: 100%; object-fit: contain;">`;
            imageSelection.style.border = '3px solid var(--accent-color)';
            imageSelection.style.background = 'rgba(152, 215, 165, 0.1)';
          };
          reader.readAsDataURL(file);
        }
      };
      input.click();
    }
    
    // 診断に戻る
    function returnToDiagnosis() {
      window.location.href = '/';
    }
    
    // 診断結果を見る
    function viewDiagnosisResults() {
      if (department || course || club) {
        alert(`診断結果:\n学科: ${department || '未設定'}\nコース: ${course || '未設定'}\n部活動: ${club || '未設定'}`);
      } else {
        alert('診断結果が設定されていません。\nまずは診断ゲームを完了してください。');
      }
    }
    
    // Xに投稿
    function shareToX() {
      alert('Xへの投稿機能は準備中です。\n\n学生証の画像が生成された後に利用可能になります。');
    }
    
    // URLをコピー
    function copyUrl() {
      const currentUrl = window.location.href;
      navigator.clipboard.writeText(currentUrl).then(function() {
        alert('URLをクリップボードにコピーしました！');
      }).catch(function() {
        // フォールバック
        const textArea = document.createElement('textarea');
        textArea.value = currentUrl;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        alert('URLをクリップボードにコピーしました！');
      });
    }
    
    // フォーム送信時の処理
    document.getElementById('studentForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const name = document.getElementById('name').value;
      const nameEn = document.getElementById('nameEn').value;
      const dobMonth = document.getElementById('dobMonth').value;
      const dobDay = document.getElementById('dobDay').value;
      
      if (!name || !nameEn || !dobMonth || !dobDay) {
        alert('すべての項目を入力してください。');
        return;
      }
      
      // プレビューを表示
      showPreview(name, nameEn, dobMonth, dobDay);
    });
    
    function showPreview(name, nameEn, dobMonth, dobDay) {
      const previewArea = document.getElementById('previewArea');
      
      previewArea.innerHTML = `
        <div class="student-info">
          <h3>学生証情報</h3>
          <div class="info-item">
            <span class="info-label">氏名（漢字）:</span>
            <span class="info-value">${name}</span>
          </div>
          <div class="info-item">
            <span class="info-label">氏名（ローマ字）:</span>
            <span class="info-value">${nameEn}</span>
          </div>
          <div class="info-item">
            <span class="info-label">生年月日:</span>
            <span class="info-value">${dobMonth}月${dobDay}日</span>
          </div>
          ${department ? `<div class="info-item"><span class="info-label">学科:</span><span class="info-value">${department}</span></div>` : ''}
          ${course ? `<div class="info-item"><span class="info-label">コース:</span><span class="info-value">${course}</span></div>` : ''}
          ${club ? `<div class="info-item"><span class="info-label">部活動:</span><span class="info-value">${club}</span></div>` : ''}
        </div>
        <p style="color: var(--accent-color); font-weight: 600; margin: 0; text-align: center;">学生証の生成が完了しました！</p>
      `;
      
      // プレビューセクションまでスクロール
      document.querySelector('.panel:last-child').scrollIntoView({ 
        behavior: 'smooth',
        block: 'start'
      });
    }
  </script>
</body>
</html>

