[1mdiff --git a/README.md b/README.md[m
[1mindex 5ac2788..af8cdf9 100644[m
[1m--- a/README.md[m
[1m+++ b/README.md[m
[36m@@ -78,7 +78,85 @@[m [mSNSでシェアした画像が更新されない場合は、以下の手順で[m
 - フロントエンド: HTML, CSS, JavaScript[m
 - 画像処理: Canvas API[m
 - 画像ホスティング: Cloudinary[m
[31m-- シェアページ: Cloudflare Workers[m
[32m+[m[32m- シェアページ: Cloudflare Pages Functions[m
[32m+[m
[32m+[m[32m## 最新の修正内容（v2.0.0）[m
[32m+[m
[32m+[m[32m### 修正された問題[m
[32m+[m
[32m+[m[32m1. **クリック時のテキスト選択問題**[m
[32m+[m[32m   - ボタンやリンクをクリックした際の不要なテキスト選択を無効化[m
[32m+[m[32m   - フォーム入力欄は除外（`.copyable`クラスで選択可能）[m
[32m+[m
[32m+[m[32m2. **診断ゲーム遷移問題**[m
[32m+[m[32m   - `generator → (診断結果を見る) → index` の遷移でパラメータが消失する問題を修正[m
[32m+[m[32m   - iFrame検知時にクエリパラメータとハッシュを引き継ぐように改善[m
[32m+[m[32m   - `quiz.html`で`showResult=true`を受けて結果UIを即時表示[m
[32m+[m
[32m+[m[32m3. **画像付き共有機能の実装**[m
[32m+[m[32m   - サーバレスで"共有専用ページ（OGP静的HTML）"を返す方式Aを実装[m
[32m+[m[32m   - Cloudflare Pages Functionsを使用したOGP画像生成[m
[32m+[m[32m   - X/Discord等での画像プレビュー表示に対応[m
[32m+[m
[32m+[m[32m4. **セキュリティ強化**[m
[32m+[m[32m   - Referrer-Policyの追加[m
[32m+[m[32m   - フォーム内ボタンの`type="button"`明示[m
[32m+[m[32m   - 外部リンクへの`rel="noopener noreferrer"`付与[m
[32m+[m
[32m+[m[32m### 検証手順[m
[32m+[m
[32m+[m[32m#### 1. クリック時のテキスト選択問題の確認[m
[32m+[m[32m```bash[m
[32m+[m[32m# ローカルでテスト[m
[32m+[m[32mpython -m http.server 8000[m
[32m+[m[32m# または[m
[32m+[m[32mnpx serve .[m
[32m+[m[32m```[m
[32m+[m[32m- ブラウザで各ページを開く[m
[32m+[m[32m- ボタンやリンクをクリックしてテキスト選択が発生しないことを確認[m
[32m+[m[32m- フォーム入力欄ではテキスト選択が可能なことを確認[m
[32m+[m
[32m+[m[32m#### 2. 診断ゲーム遷移の確認[m
[32m+[m[32m1. Studio環境またはiFrame内で`index.html`にアクセス[m
[32m+[m[32m2. `quiz.html`にリダイレクトされることを確認[m
[32m+[m[32m3. 診断を完了して`generator.html`に遷移[m
[32m+[m[32m4. 「診断結果を見る」ボタンをクリック[m
[32m+[m[32m5. 診断結果が正しく表示されることを確認[m
[32m+[m
[32m+[m[32m#### 3. 画像付き共有機能の確認[m
[32m+[m[32m1. Cloudflare Pages Functionsのデプロイ[m
[32m+[m[32m   ```bash[m
[32m+[m[32m   # functions/s/[slug].jsの設定[m
[32m+[m[32m   # CLOUD_NAMEとリダイレクト先URLを実際の値に置換[m
[32m+[m[32m   ```[m
[32m+[m
[32m+[m[32m2. X Card Validatorでの確認[m
[32m+[m[32m   - https://cards-dev.twitter.com/validator にアクセス[m
[32m+[m[32m   - 生成された共有URL（例: `https://ogp.your-domain.com/s/xxxx`）を入力[m
[32m+[m[32m   - 学生証画像がプレビューで表示されることを確認[m
[32m+[m
[32m+[m[32m3. Discordでの確認[m
[32m+[m[32m   - 共有URLをDiscordに貼り付けて画像サムネイルが表示されることを確認[m
[32m+[m
[32m+[m[32m#### 4. セキュリティ設定の確認[m
[32m+[m[32m- 各HTMLファイルの`<head>`に`<meta name="referrer" content="strict-origin-when-cross-origin">`が含まれていることを確認[m
[32m+[m[32m- フォーム内のボタンに`type="button"`が設定されていることを確認[m
[32m+[m[32m- 外部リンクに`rel="noopener noreferrer"`が設定されていることを確認[m
[32m+[m
[32m+[m[32m### 設定が必要な項目[m
[32m+[m
[32m+[m[32m1. **Cloudflare Pages Functions**[m
[32m+[m[32m   - `functions/s/[slug].js`内の`CLOUD_NAME`を実際のCloudinaryクラウド名に置換[m
[32m+[m[32m   - リダイレクト先URLを実際のドメインに置換[m
[32m+[m
[32m+[m[32m2. **generator.html**[m
[32m+[m[32m   - `SHARE_BASE`定数を実際のCloudflare Pagesドメインに置換[m
[32m+[m
[32m+[m[32m### 注意事項[m
[32m+[m
[32m+[m[32m- 既存のデザイン/ギミックは完全に維持されています[m
[32m+[m[32m- 既存のshare系HTMLファイルは削除・改変していません[m
[32m+[m[32m- 相対パス/絶対パスの基準は変更していません[m
 [m
 ## ライセンス[m
 [m
[1mdiff --git a/assets/css/style.css b/assets/css/style.css[m
[1mindex 429a85a..075658e 100644[m
[1m--- a/assets/css/style.css[m
[1m+++ b/assets/css/style.css[m
[36m@@ -509,4 +509,16 @@[m [mfooter {[m
   transform: translateY(-1px);[m
 }[m
 [m
[31m-/* 修正終了 */ [m
\ No newline at end of file[m
[32m+[m[32m/* 修正終了 */[m[41m [m
[32m+[m
[32m+[m[32m/* クリックUIの選択を禁止（見た目は一切変えない） */[m
[32m+[m[32mbutton, a, [role="button"], .btn, .answer-option,[m[41m [m
[32m+[m[32m#toGeneratorBtn, #restartBtn, #backToDiagnosisBtn, #viewDiagnosisResultBtn {[m
[32m+[m[32m  -webkit-user-select: none;[m
[32m+[m[32m  -moz-user-select: none;[m
[32m+[m[32m  user-select: none;[m
[32m+[m[32m}[m
[32m+[m[32mimg { -webkit-user-drag: none; }[m
[32m+[m
[32m+[m[32m/* テキストコピーを許可したい要素には .copyable を付ける */[m
[32m+[m[32m.copyable { user-select: text !important; }[m[41m [m
\ No newline at end of file[m
[1mdiff --git a/generator.html b/generator.html[m
[1mindex 223a9c5..bb4f66a 100644[m
[1m--- a/generator.html[m
[1m+++ b/generator.html[m
[36m@@ -3,6 +3,7 @@[m
 <head>[m
   <meta charset="UTF-8">[m
   <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">[m
[32m+[m[32m  <meta name="referrer" content="strict-origin-when-cross-origin">[m
   <title>放課後クロニクル 学生証ジェネレーター</title>[m
   <meta property="og:title" content="放課後クロニクル 学生証ジェネレーター">[m
   <meta property="og:description" content="あなただけの学生証を作成しよう！">[m
[36m@@ -18,6 +19,53 @@[m
   <script src="assets/js/privacy-protection.js"></script>[m
   <script src="assets/js/security-monitor.js"></script>[m
   <script src="assets/js/app.js"></script>[m
[32m+[m[41m  [m
[32m+[m[32m  <!-- 共有URL生成機能 -->[m
[32m+[m[32m  <script>[m
[32m+[m[32m    // 共有用ドメイン定数[m
[32m+[m[32m    const SHARE_BASE = 'https://ogp.your-domain.com'; // Cloudflare Pagesのドメイン[m
[32m+[m[41m    [m
[32m+[m[32m    // Base64URL変換ユーティリティ[m
[32m+[m[32m    function toBase64Url(str){[m
[32m+[m[32m      return btoa(unescape(encodeURIComponent(str)))[m
[32m+[m[32m        .replace(/\+/g,'-').replace(/\//g,'_').replace(/=+$/,'');[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    // Cloudinary へ保存完了後の処理に追加：public_idから共有URLを作る[m
[32m+[m[32m    function buildShareUrl(public_id){[m
[32m+[m[32m      const slug = toBase64Url(public_id) + '-' + Date.now();[m
[32m+[m[32m      return `${SHARE_BASE}/s/${slug}`;[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    // 共有ボタンの href を差し替える（既存ボタンやリンクID/クラスは変更しない）[m
[32m+[m[32m    function updateShareLinks(public_id, text){[m
[32m+[m[32m      const shareUrl = buildShareUrl(public_id);[m
[32m+[m[41m      [m
[32m+[m[32m      // X（Twitter）intent[m
[32m+[m[32m      const x = document.getElementById('btnShareX'); // 既存のIDに合わせる。無け